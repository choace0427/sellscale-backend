"""Create sales_engagement_interaction_raw and sales_engagement_interaction_ss tables for email engagement data

Revision ID: 6f5a1a529455
Revises: 4ebf8bc0eca8
Create Date: 2023-02-02 14:28:25.222136

"""
import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = "6f5a1a529455"
down_revision = "4ebf8bc0eca8"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table(
        "sales_engagement_interaction_raw",
        sa.Column("created_at", sa.DateTime(), nullable=True),
        sa.Column("updated_at", sa.DateTime(), nullable=True),
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("client_id", sa.Integer(), nullable=False),
        sa.Column("client_archetype_id", sa.Integer(), nullable=False),
        sa.Column("client_sdr_id", sa.Integer(), nullable=False),
        sa.Column("csv_data", postgresql.JSONB(astext_type=sa.Text()), nullable=False),
        sa.Column("csv_data_hash", sa.String(), nullable=False),
        sa.ForeignKeyConstraint(
            ["client_archetype_id"],
            ["client_archetype.id"],
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["client.id"],
        ),
        sa.ForeignKeyConstraint(
            ["client_sdr_id"],
            ["client_sdr.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
    )
    op.create_table(
        "sales_engagement_interaction_ss",
        sa.Column("created_at", sa.DateTime(), nullable=True),
        sa.Column("updated_at", sa.DateTime(), nullable=True),
        sa.Column("id", sa.Integer(), nullable=False),
        sa.Column("client_id", sa.Integer(), nullable=False),
        sa.Column("client_archetype_id", sa.Integer(), nullable=False),
        sa.Column("client_sdr_id", sa.Integer(), nullable=False),
        sa.Column("sales_engagement_interaction_raw_id", sa.Integer(), nullable=False),
        sa.Column(
            "ss_status_data", postgresql.JSONB(astext_type=sa.Text()), nullable=False
        ),
        sa.ForeignKeyConstraint(
            ["client_archetype_id"],
            ["client_archetype.id"],
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["client.id"],
        ),
        sa.ForeignKeyConstraint(
            ["client_sdr_id"],
            ["client_sdr.id"],
        ),
        sa.ForeignKeyConstraint(
            ["sales_engagement_interaction_raw_id"],
            ["sales_engagement_interaction_raw.id"],
        ),
        sa.PrimaryKeyConstraint("id"),
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table("sales_engagement_interaction_ss")
    op.drop_table("sales_engagement_interaction_raw")
    # ### end Alembic commands ###
