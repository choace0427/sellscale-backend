""" Make Nylas data columns nullable

Revision ID: 38a35ef58059
Revises: 8d4e334b8320
Create Date: 2023-05-04 15:16:13.423318

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = '38a35ef58059'
down_revision = '8d4e334b8320'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('email_conversation_message', 'subject',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('email_conversation_message', 'snippet',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('email_conversation_message', 'body',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('email_conversation_message', 'bcc',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_message', 'cc',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_message', 'date_received',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('email_conversation_message', 'files',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_message', 'message_from',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_message', 'message_to',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_message', 'reply_to',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_thread', 'subject',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'snippet',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'first_message_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'last_message_received_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'last_message_sent_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'last_message_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'participants',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=True)
    op.alter_column('email_conversation_thread', 'has_attachments',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'unread',
               existing_type=sa.BOOLEAN(),
               nullable=True)
    op.alter_column('email_conversation_thread', 'version',
               existing_type=sa.INTEGER(),
               nullable=True)
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('email_conversation_thread', 'version',
               existing_type=sa.INTEGER(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'unread',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'has_attachments',
               existing_type=sa.BOOLEAN(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'participants',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_thread', 'last_message_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'last_message_sent_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'last_message_received_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'first_message_timestamp',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'snippet',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('email_conversation_thread', 'subject',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('email_conversation_message', 'reply_to',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'message_to',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'message_from',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'files',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'date_received',
               existing_type=postgresql.TIMESTAMP(),
               nullable=False)
    op.alter_column('email_conversation_message', 'cc',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'bcc',
               existing_type=postgresql.ARRAY(postgresql.JSON(astext_type=sa.Text())),
               nullable=False)
    op.alter_column('email_conversation_message', 'body',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('email_conversation_message', 'snippet',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.alter_column('email_conversation_message', 'subject',
               existing_type=sa.VARCHAR(),
               nullable=False)
    # ### end Alembic commands ###
